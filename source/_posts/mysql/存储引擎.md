---
title: 存储引擎介绍（MySql）
date: 2019-12-21 22:18
comments: false
tags: 
- 存储引擎
categories: 
- 存储引擎
keywords: 
- 存储引擎
---

### 存储引擎介绍

数据库存储引擎是数据库底层软件引擎，数据库管理系统使用数据引擎进行创建、查询、更新和删除操作。不同的存储引擎提供不同的存储机制、索引技巧、锁定水平等功能，使用不同的存储引擎还可以获得特定的功能。

mysql5.7中支持的存储引擎有InnoDB、MyISAM、Memory、Merge、Archive、Federated、CSV、BLACKHOLE等。

不同存储引擎的特点：

| 功能 | MylSAM | MEMORY | InnoDB | Archive |
| --- | ------- | ----- | ------- | ------ |
| 存储限制 | 256TB | RAM | 64TB | None |
| 支持事务 | No | No | Yes | No |
| 支持全文索引 | Yes | No | No | No |
| 支持树索引 |Yes | Yes | Yes | No |
| 支持哈希索引 | No | Yes | Yes | No |
| 支持数据缓存 | No | N/A | Yes | No |
| 支持外键 | No | No | Yes | No |


#### InnoDB

InnoDB底层存储结构为B+树，B树的每个节点对应innodb的一个page，page大小是固定的，一般设为16k。其中非叶子节点只有键值，叶子节点包含完成数据。

适用场景：

1. 经常更新的表，适合处理多重并发的更新请求。
2. 支持事务。
3. 可以从灾难中恢复(通过 bin-log 日志等)。
4. 外键约束。只有他支持外键。 
5. 支持自动增加列属性 auto_increment。

#### MyIASM

MyISAM是MySql5.6之前的默认引擎，但是它没有提供对数据库事务的支持，也不支持行级锁和外键，因此当INSERT或UPDATE数据时需要锁定整个表，效率会更低一些。
ISAM执行读取操作的速度很快，而且不占用大量的内存和存储资源。在设计之初就预想数据组织成有固定长度的记录，按顺序存储的。（ISAM是一种静态索引结构）
缺点是它不支持事务处理。

#### Memory

Memory堆内存：使用存在内存中的内容来创建表。Memory表只实际对应一个磁盘文件。由于它的数据是放在内存中的并默认使用HASH索引，因此访问速度很快。
但是服务一但关闭，表中的数据就会丢失。Memory同时支持hash索引和B树索引，B树索引可以使用部分和通配查询，也可以使用<,>和>=等操作符方便数据挖掘，hash索引相等的比较快但是对于范围的比较慢很多。

#### 选择

- 如果要提供提交、回滚和恢复的事务安全（ACID 兼容）能力，并要求实现并发控制，InnoDB 是一个很好的选择。
- 如果数据表主要用来插入和查询记录，则 MyISAM 引擎提供较高的处理效率。
- 如果只是临时存放数据，数据量不大，并且不需要较高的数据安全性，可以选择将数据保存在内存的 MEMORY 引擎中，MySQL 中使用该引擎作为临时表，存放查询的中间结果。
- 如果只有 INSERT 和 SELECT 操作，可以选择Archive 引擎，Archive 存储引擎支持高并发的插入操作，但是本身并不是事务安全的。Archive 存储引擎非常适合存储归档数