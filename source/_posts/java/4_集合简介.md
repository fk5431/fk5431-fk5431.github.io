---
title: java集合简述
date: 2019-11-24 20:21:33
comments: false
tags: 
- java
categories: 
- java
keywords: java,集合,List,Set,Map,Collection
---

### java集合

java集合类存放在java.util下面，主要有三种：Set，List，Map。

- Collection 是集合Set、List和Queue最基本的接口
- Iterator 可以使用迭代器遍历集合中的元素
- Map 是key value映射形式的基本接口

|     |            |           |                |                                                                |
| --- | ---------- | --------- | -------------- | -------------------------------------------------------------- |
|     |            |           |  ArrayList     | 有序，底层是数组，查询快，增删慢，线程不安全，扩容 n*1.5+1            |
|     |            |  List     |  Vector        | 有序，底层是数组，查询快，增删慢，线程安全，扩容n*2                   |
|     |            |           |  LinkedList    | 有序，底层双向循环链表，查询慢，增删快，线程不安全                    |
|     |            |           |                |                                                                |
|     | Collection |           |  HashSet       | 无序，元素不可重复，封装HashMap实现，存取都比较快                    |
|集合 |             |  Set     |  TreeSet        | 无序，元素不可重复，底层使用二叉树实现，内部是TreeMap的SortedSet     |
|     |            |           |  LinkedHashSet | 使用Hash表存储，用双向链表记录插入顺序                              |
|     |            |           |                |                                                                |
|     |            |  Queue    |                | 在两端出入的List，可使用数组或者链表进行实现                         |
|     |            |           |                |                                                                |
|     |            |           |  HashMap       | 底层是hash存储，线程不安全，key和value都可为null                    |
|     | Map        |           |  HashTable     | 底层是hash存储，线程安全，key和value都不可以为null                  |
|     |            |           |  TreeMap       | 使用二叉树实现                                                   |

#### List

List的实现类主要是ArrayList，Vector，LinkedList

##### ArrayList

ArrayList是最常用的List实现类，内部是通过数组实现的，它允许对元素进行快速随机访问。数组的缺点是每个元素之间不能有间隔，当数组大小不满足时需要增加存储能力，就要将已经有数组的数据复制到新的存储空间中。当从 ArrayList 的中间位置插入或者删除元素时，需要对数组进行复制、移动、代价比较高。因此，它适合随机查找和遍历，不适合插入和删除。

##### Vector（线程安全）

Vector 与 ArrayList 一样，也是通过数组实现的，不同的是它支持线程的同步，即某一时刻只有一个线程能够写 Vector，避免多线程同时写而引起的不一致性，但实现同步需要很高的花费，因此，访问它比访问 ArrayList 慢。

##### LinkList（链表）

LinkedList是用链表结构存储数据的，很适合数据的动态插入和删除，随机访问和遍历速度比较慢。另外，他还提供了 List 接口中没有定义的方法，专门用于操作表头和表尾元素，可以当作堆 栈、队列和双向队列使用。

#### Set

set主要是存储无序元素，元素的值不能重复。主要有HashSet，TreeSet和LinkedHashSet。

##### HashSet

HashSet内部其实是封装了HashMap，通过对内部HashMap的操作来实现HashSet的功能。

##### TreeSet

TreeSet是使用二叉树的原理对新 add()的对象按照指定的顺序排序(升序、降序)，每增加一个对象都会进行排序，将对象插入的二叉树指定的位置。TreeSet是基于TreeMap实现的，TreeSet的元素支持2种排序方式：自然排序或者根据提供的Comparator进行排序。
TreeSet的特点：
1. 不能有重复的元素；
2. 具有排序功能；
3. TreeSet中的元素必须实现Comparable接口并重写compareTo()方法，TreeSet判断元素是否重复 、以及确定元素的顺序 靠的都是这个方法；
    - 对于Java类库中定义的类，TreeSet可以直接对其进行存储，如String，Integer等,因为这些类已经实现了Comparable接口);
    - 对于自定义类，如果不做适当的处理，TreeSet中只能存储一个该类型的对象实例，否则无法判断是否重复。
4. 依赖TreeMap。
5. 相对HashSet,TreeSet的优势是有序，劣势是相对读取慢。根据不同的场景选择不同的集合。

##### LinkedHashSet

LinkedHashSet具有set集合不重复的特点，同时具有可预测的迭代顺序，也就是我们插入的顺序，它也是线程不安全的集合。
LinkedHashSet继承自HashSet，唯一的区别是LinkedHashSet内部使用的是LinkHashMap。这样做的意义或者好处就是LinkedHashSet中的元素顺序是可以保证的，也就是说遍历序和插入序是一致的。

#### Queue

队列就是一个先入先出（FIFO）的数据结构。

- 没有实现的阻塞接口的LinkedList，实现了java.util.Queue接口和java.util.AbstractQueue接口
- 实现阻塞接口的（BlockingQueue）：
    - ArrayBlockingQueue ：一个由数组支持的有界队列。
    - LinkedBlockingQueue ：一个由链接节点支持的可选有界队列。
    - PriorityBlockingQueue ：一个由优先级堆支持的无界优先级队列。
    - DelayQueue ：一个由优先级堆支持的、基于时间的调度队列。
    - SynchronousQueue ：一个利用 BlockingQueue 接口的简单聚集（rendezvous）机制。

#### Map

Map是存储的key value形式的数据，Map的主要是实现有5种，HashMap，ConcurrentHashMap，HashTable，TreeMap，LinkedHashMap

##### HashMap 

HashMap是通过hash表来实现键值对的存储，在JDK1.8与1.7的实现上还不同，具体的源码分析可以见 ![HashMap阅读 （1.8|1.7）](http://fk5431.com/20191114/javasource/util/1_HashMap/)

##### ConcurrentHashMap

ConcurrentHashMap 是线程安全的HashMap，但是此实现下的get方法其实是弱一致性的，有可能获取到过期的数据，具体的源码分析可以见 ![ConcurrentHashMap(1.7|1.8)阅读](http://fk5431.com/20191114/javasource/util/4_ConcurrentHashMap/)

##### HashTable

Hashtable 是遗留类，很多映射的常用功能与 HashMap 类似，不同的是它承自 Dictionary 类，并且是线程安全的，任一时间只有一个线程能写 Hashtable，并发性不如 ConcurrentHashMap，因为ConcurrentHashMap(1.7)引入了分段锁。但是HashTable的方法都是强一致性的，对数据的一致性要求没有那么苛刻不建议使用HashTable，可以使用ConcurrentHashMap替代。

##### TreeMap（二叉树实现）

TreeMap 实现 SortedMap 接口，能够把它保存的记录根据键排序，默认是按键值的升序排序，也可以指定排序的比较器，当用 Iterator 遍历 TreeMap 时，得到的记录是排过序的。
在使用 TreeMap 时，key 必须实现 Comparable 接口或者在构造 TreeMap 传入自定义的Comparator，否则会在运行时抛出 java.lang.ClassCastException 类型的异常。

##### LinkedHashMap

LinkedHashMap保存了记录的插入顺序，在用 Iterator 遍历LinkedHashMap 时，先得到的记录肯定是先插入的，也可以在构造时带参数，按照访问次序排序。

LinkedHashMap继承了HashMap，所以他们很多地方是相似的。LinkedHashMap结构中还维护着一个双向链表，用于记录顺序，所以可以做到跟存入顺序一样取出元素。












