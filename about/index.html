<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>挖生活费</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <meta name="format-detection" content="telephone=no"/>
    <link rel="stylesheet" href="css/living.css">

    <script type="text/javascript" src="js/vue.js"></script>
    <script type="text/javascript" src="js/fetch.js"></script>
    <script type="text/javascript" src="js/app.js"></script>
    <script type="text/javascript" src="js/md5.js"></script>
</head>
<body>
<div class="entry" id="app">
    <!--<div class="head">-->
        <!--<img src="image/back.png" class="head_tip">-->
        <!--<span>挖生活费</span>-->
    <!--</div>-->
    <div class="nav">
        <img src="image/background.png" alt="背景图" style="height:4.45rem;">
    </div>
    <div style="text-align: center;" v-if="time">
        <button :class='{button1:is,"button": butt}'>
            {{hours}}<span v-if="hours">小时</span>{{minutes}}<span v-if="minutes">分</span>{{seconds}}秒后开始
        </button>
        <button :class='{button1:is,"button": butt}' v-if="!time">
            活动结束
        </button>

   </div>
    <div class="main">
        <div style="text-align: center;overflow: hidden;">
              <span class="title">
                <img src="img/line2.png" style="padding-top: 0.15rem;padding-right: 0.2rem;">
                <img src="img/font.png" style="width:0.25rem;height:0.24rem;"><span style="float:left;font-size:0.3rem;padding-left:0.09rem;color:#723c0f">活动规则</span>
                <img src="img/line1.png"  style="padding-top: 0.15rem;padding-left: 0.2rem;">
            </span>
        </div>
        <div class="font">
            1、每天前4名挖到300元的工友，即获得 <b style="color:#e12407;">300元</b> 现金，实时发放进入钱包，可在项目内商户消费使用（不可提现）；<br/>
            2、挖生活费活动持续30天，每天都有机会，只要下手快，现金挖不停；如果来得晚，还可继续挖。活动结束后，挖到生活费金额最高的前两名工友，更可获得 <b style="color:#e12407;">1000元</b> 生活费现金大奖；<br/>
            3、一个好汉三个帮，转发活动链接给微信好友或朋友圈，找工友帮挖生活费才给力；<br/>
            4、每个人在活动期间最多两次挖中机会；<br/>
            5、活动时间：2018年XX月XX日-2018年XX月XX日；<br/>
            6、活动最终解释权归诸英台所有。
        </div>
    </div>
</div>
<script>
    var app=new Vue({
        el:"#app",
        data:{
            is:false,
            butt:true,
            time:true,
            hours:'',
            minutes:'',
            seconds:'',
            settime:'',
        },
        created:function(){
            var that=this;
            var token=getUrlKey("tokenID");
            var userId=getUrlKey("userId");

            this.setCookie('tokenApp',token);
            this.setCookie('userIdApp',userId);
            // alert('index.html');
            // // alert(this.getCookie('userIdApp'));
            this.$api.post('/worker/activity/livingCostInfo',{
                tokenID :token ,//令牌
                userId :userId,//用户
                "start": 0,
                "num": 10
            },function(res){
               if(res.body.time){
                   if(res.body.time<0){
                       that.time =false;
                   }else{
                       that.time =true;
                       var time_t = new Date().getTime();
                       that.settime = setInterval(function(){ that.myObject(res.body.startTime,time_t);},1000)
                   }
               }else{
                   window.location.href = 'campaign.html';
               }

            },function(e){
            });

        },
        methods:{
            myObject:function(times,time_t){
                var mss =times -(new Date().getTime()-time_t);
                // var mss =times;
                if(mss<0){
                    // this.orderDetailsTime = "00:00:00";
                    window.clearInterval(this.settime);
                    window.location.href = 'campaign.html';
                }else{
                    this.hours = parseInt((mss % (86400000)) / (3600000)).toString();
                    this.minutes = parseInt((mss % (3600000)) / (60000)).toString();
                    this.seconds = parseInt((mss % (60000)) / 1000).toString();
                    this.hours =this.hours.length < 2 ? '0' + this.hours : this.hours;
                    this.minutes =this.minutes.length < 2 ? '0' + this.minutes : this.minutes;
                    this.seconds =this.seconds.length < 2 ? '0' + this.seconds : this.seconds

                }
            },
            // formatTime:function(msd) {
            //     var timestamp = new Date(msd);
            //     var time = timestamp.toTimeString().substr(0, 8);
            //     return time.replace(':','小时').replace(':','分')+'秒后开始';
            //
            // }
        },
        filters:{}
    });
</script>
<style scoped>
    body{
        background-color: #fff8e2;
    }
   .head{
       background:url("image/head_background.png");
       width:100%;
       height:0.96rem;
       text-align: center;
       line-height: 0.96rem;
       font-size:0.36rem;
       color:#fff;
   }
    .head_tip{
        margin-top:0.32rem;
        margin-left:0.32rem;
        display:inline-block;
        height:0.33rem;
        width:0.18rem;
        float:left;
    }
    .title{
        overflow: hidden;
        display: block;
        width: 3.8rem;
        margin: 0 auto;

    }
    .title>img{
        display: inline-block;
        float:left;
    }
    .button{
        width:6.56rem;
        height:0.85rem;
        font-size:0.3rem;
        line-height:0.85rem;
        border:0.01rem solid #cccccc;
        border-radius: 0.1rem;
        margin:0 auto;
        text-align: center;
        background:#cccccc;
        color:#fff;
        outline:none;
        margin-bottom:0.32rem;
    }
    .button1{
        width:6.56rem;
        height:0.85rem;
        font-size:0.3rem;
        line-height:0.85rem;
        border:0.01rem solid #ff882d;
        border-radius: 0.1rem;
        margin:0 auto;
        text-align: center;
        background:#ff882d;
        color:#fff;
        outline:none;
    }
    .font{
        padding:0.24rem 0.32rem;
        font-size:0.24rem;
        line-height:0.48rem;
    }
</style>
</body>
</html>